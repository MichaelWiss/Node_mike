(function(){angular.module("loc8rApp",["ngRoute","ngSanitize","mm.foundation"]);function e(e,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/location/:locationid",{templateUrl:"/locationDetail/locationDetail.view.html",controller:"locationDetailCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode({enabled:true,requireBase:false})}angular.module("loc8rApp").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("loc8rApp").controller("homeCtrl",e);e.$inject=["$scope","loc8rData","geolocation"];function e(e,t,n){var o=this;console.log(window.location);o.pageHeader={title:"Loc8r",strapline:"Find places to work with wifi near you!"};o.sidebar={content:"Looking for wifi and a seat etc etc"};o.message="Checking your location";o.getData=function(e){var n=e.coords.latitude,r=e.coords.longitude;o.message="Searching for nearby places";console.log(n,r);t.locationByCoords(n,r).success(function(e){o.message=e.length>0?"":"No locations found nearby";o.data={locations:e};console.log(o.data)}).error(function(e){o.message="Sorry, something's gone wrong"})};o.showError=function(t){e.$apply(function(){o.message=t.message})};o.noGeo=function(){e.$apply(function(){o.message="Geolocation is not supported by this browser."})};n.getPosition(o.getData,o.showError,o.noGeo)}})();(function(){angular.module("loc8rApp").controller("aboutCtrl",e);function e(){var e=this;e.pageHeader={title:"About Loc8r"};e.main={content:"Loc8r was created to help people find places to sit down and get a bit of work done.\n\nYOLO migas organic etsy, leggings four loko keffiyeh viral butcher trust fund XOXO pitchfork intelligentsia fashion axe. Occupy offal raw denim listicle dreamcatcher, kombucha readymade bitters microdosing. Chia typewriter forage, freegan heirloom bushwick keffiyeh everyday carry +1 sustainable you probably haven&#39;t heard of them artisan. Locavore VHS literally chillwave, flexitarian kale chips gastropub brooklyn migas. Gentrify tousled four dollar toast freegan normcore franzen, irony PBR&B crucifix offal keytar viral. Sriracha tilde meh, vinyl selfies pitchfork chambray photo booth. Brunch scenester synth poutine, knausgaard green juice fashion axe organic portland cold-pressed sartorial food truck vice blue bottle."}}})();(function(){angular.module("loc8rApp").controller("locationDetailCtrl",e);e.$inject=["$routeParams","loc8rData"];function e(e,t){var n=this;n.locationid=e.locationid;t.locationById(n.locationid).success(function(e){n.data={location:e};n.pageHeader={title:n.data.location.name}}).error(function(e){console.log(e)});n.pageHeader={title:n.locationid}}})();(function(e,t){"use strict";function n(e){var t=[];d(t,s).chars(e);return t.join("")}var o=t.$$minErr("$sanitize"),r,i,a,l,c,s,u,d;t.module("ngSanitize",[]).provider("$sanitize",function(){function n(e,t){var n={},o=e.split(","),r;for(r=0;r<o.length;r++)n[t?c(o[r]):o[r]]=!0;return n}function f(e){for(var t={},n=0,o=e.length;n<o;n++){var r=e[n];t[r.name]=r.value}return t}function p(e){return e.replace(/&/g,"&amp;").replace(h,function(e){var t=e.charCodeAt(0);e=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(v,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(t){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,o=0,r=n.length;o<r;o++){var i=n[o],a=i.name.toLowerCase();if("xmlns:ns1"===a||0===a.lastIndexOf("ns1:",0))t.removeAttributeNode(i),o--,r--}(n=t.firstChild)&&g(n);(n=t.nextSibling)&&g(n)}var m=!1;this.$get=["$$sanitizeUri",function(e){m&&i(A,x);return function(t){var n=[];u(t,d(n,function(t,n){return!/^unsafe:/.test(e(t,n))}));return n.join("")}}];this.enableSvg=function(e){return l(e)?(m=e,this):m};r=t.bind;i=t.extend;a=t.forEach;l=t.isDefined;c=t.lowercase;s=t.noop;u=function(t,n){null===t||void 0===t?t="":"string"!==typeof t&&(t=""+t);L.innerHTML=t;var r=5;do{if(0===r)throw o("uinput");r--;e.document.documentMode&&g(L);t=L.innerHTML;L.innerHTML=t}while(t!==L.innerHTML);for(r=L.firstChild;r;){switch(r.nodeType){case 1:n.start(r.nodeName.toLowerCase(),f(r.attributes));break;case 3:n.chars(r.textContent)}var i;if(!(i=r.firstChild)&&(1==r.nodeType&&n.end(r.nodeName.toLowerCase()),i=r.nextSibling,!i))for(;null==i;){r=r.parentNode;if(r===L)break;i=r.nextSibling;1==r.nodeType&&n.end(r.nodeName.toLowerCase())}r=i}for(;r=L.firstChild;)L.removeChild(r)};d=function(e,t){var n=!1,o=r(e,e.push);return{start:function(e,r){e=c(e);!n&&C[e]&&(n=e);n||!0!==A[e]||(o("<"),o(e),a(r,function(n,r){var i=c(r),a="img"===e&&"src"===i||"background"===i;!0!==$[i]||!0===D[i]&&!t(n,a)||(o(" "),o(r),o('="'),o(p(n)),o('"'))}),o(">"))},end:function(e){e=c(e);n||!0!==A[e]||!0===y[e]||(o("</"),o(e),o(">"));e==n&&(n=!1)},chars:function(e){n||o(p(e))}}};var h=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v=/([^\#-~ |!])/g,y=n("area,br,col,hr,img,wbr"),b=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),k=n("rp,rt"),w=i({},k,b),b=i({},b,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),k=i({},k,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),C=n("script,style"),A=i({},y,b,k,w),D=n("background,cite,href,longdesc,src,xlink:href"),w=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),k=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),$=i({},D,k,w),L;(function(e){if(e.document&&e.document.implementation)e=e.document.implementation.createHTMLDocument("inert");else throw o("noinert");var t=(e.documentElement||e.getDocumentElement()).getElementsByTagName("body");1===t.length?L=t[0]:(t=e.createElement("html"),L=e.createElement("body"),t.appendChild(L),e.appendChild(t))})(e)});t.module("ngSanitize").filter("linky",["$sanitize",function(e){var o=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,i=t.$$minErr("linky"),a=t.isDefined,l=t.isFunction,c=t.isObject,s=t.isString;return function(t,u,d){function f(e){e&&h.push(n(e))}function p(e,t){var n,o=g(e);h.push("<a ");for(n in o)h.push(n+'="'+o[n]+'" ');!a(u)||"target"in o||h.push('target="',u,'" ');h.push('href="',e.replace(/"/g,"&quot;"),'">');f(t);h.push("</a>")}if(null==t||""===t)return t;if(!s(t))throw i("notstring",t);for(var g=l(d)?d:c(d)?function(){return d}:function(){return{}},m=t,h=[],v,y;t=m.match(o);)v=t[0],t[2]||t[4]||(v=(t[3]?"http://":"mailto:")+v),y=t.index,f(m.substr(0,y)),p(v,t[0].replace(r,"")),m=m.substring(y+t[0].length);f(m);return e(h.join(""))}}])})(window,window.angular);(function(){angular.module("loc8rApp").service("geolocation",e);function e(){var e=function(e,t,n){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e,t)}else{n()}};return{getPosition:e}}})();(function(){angular.module("loc8rApp").service("loc8rData",e);e.$inject=["$http"];function e(e){var t=function(t,n){return e.get("/api/locations?lng="+n+"&lat="+t+"&maxDistance=20")};var n=function(t){return e.get("/api/locations/"+t)};return{locationByCoords:t,locationById:n}}})();(function(){angular.module("loc8rApp").filter("formatDistance",t);var e=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function t(){return function(t){var n,o;if(t&&e(t)){if(t>1){n=parseFloat(t).toFixed(1);o="m"}else{n=parseInt(t*1e3,10);o="km"}return n+o}else{return"?"}}}})();(function(){angular.module("loc8rApp").filter("addHtmlLineBreaks",e);function e(){return function(e){var t=e.replace(/\n/g,"<br/>");return t}}})();(function(){angular.module("loc8rApp").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("loc8rApp").directive("pageHeader",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();(function(){angular.module("loc8rApp").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();